@* Soubor: Pages/Shared/_Layout.cshtml *@
<!DOCTYPE html>
<html lang="cs">

<head>
    <meta charset="utf-8" />
    <title>@ViewData["Title"] - STIN Burza</title>

    <!-- Základní styly -->
    <link rel="stylesheet" href="~/css/styles.css" />

    <!-- Plotly z CDN (bez bundleru) -->
    <script src="https://cdn.plot.ly/plotly-2.24.2.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            if ("@ViewData["ShowHeader"]" == "True") {
                document.getElementById('topHeader').innerHTML = `<div class="header-left">
                    <button id="toggleSidebarBtn" class="btn-menu">☰</button>
                    <div onclick='window.location.href="/"' class="app-logo"><strong>BURZA</strong></div>
                </div>
                <div class="links">
                    <div onclick='window.location.href="/"' class="header-link link-active">
                        <strong>Hlavní stránka</strong>
                    </div>
                    <div onclick='window.location.href="/swagger"' class="header-link">
                        <strong>Swagger</strong>
                    </div>
                </div>
                <div class="dark-mode-toggle">
                    <label class="switch">
                      <input id="darkModeCheckbox" type="checkbox" />
                      <span class="slider">
                        <div class="star star_1"></div>
                        <div class="star star_2"></div>
                        <div class="star star_3"></div>
                        <svg viewBox="0 0 16 16" class="cloud_1 cloud">
                          <path
                            transform="matrix(.77976 0 0 .78395-299.99-418.63)"
                            fill="#fff"
                            d="m391.84 540.91c-.421-.329-.949-.524-1.523-.524-1.351 0-2.451 1.084-2.485 2.435-1.395.526-2.388 1.88-2.388 3.466 0 1.874 1.385 3.423 3.182 3.667v.034h12.73v-.006c1.775-.104 3.182-1.584 3.182-3.395 0-1.747-1.309-3.186-2.994-3.379.007-.106.011-.214.011-.322 0-2.707-2.271-4.901-5.072-4.901-2.073 0-3.856 1.202-4.643 2.925"
                          ></path>
                        </svg>
                      </span>
                    </label>
                </div>`;
            } else {
                var mainContent = document.getElementsByClassName('main-content')[0];
                mainContent.style.margin = "0";
                mainContent.style.padding = "0";
                document.getElementById('topHeader').style.display = "none";
            }
        });
    </script>
</head>

<body>
    <!-- FIXNÍ HEADER -->
    <header class="top-header" id="topHeader">
    </header>

    <!-- SIDEBAR (overlay) -->
    <aside class="sidebar" id="sidebar">
        <!-- Horní sekce: Filtr akcií -->
        <div class="sidebar-header">

            <div class="input-group">
                <input required="" type="text" name="text" autocomplete="off" class="input" id="companySearch">
                <label class="user-label">Stock Search</label>
            </div>
        </div>

        <!-- Střední sekce: Seznam firem -->
        <div class="sidebar-body">
            <div class="scrollable-list" id="companyList"></div>
            <div class="selected-area">
                <label>Vybrané společnosti:</label>
                <div id="selectedCompanies" class="selected-companies"></div>
            </div>
        </div>

        <!-- Spodní sekce: Dynamický button -->
        <div class="sidebar-footer">
            <div class="add-button-area">
                <button id="addToGridBtn" class="btn-confirm">Přidat do Gridu</button>
            </div>
            <div class="day-range-section">
                <label>Rozmezí dnů:</label>
                <div class="range-row">
                    <select id="dayRange">
                        <option value="-6">-6</option>
                        <option value="-5">-5</option>
                        <option value="-4">-4</option>
                        <option value="-3">-3</option>
                        <option value="-2">-2</option>
                        <option value="-1">-1</option>
                        <option value="0" selected>0</option>
                        <option value="1">+1</option>
                        <option value="2">+2</option>
                        <option value="3">+3</option>
                        <option value="4">+4</option>
                        <option value="5">+5</option>
                        <option value="6">+6</option>
                    </select>
                    <button id="sortUpBtn" class="btn-sort" title="Sort Up">
                        <span class="arrow-up">▲</span>
                    </button>
                    <button id="sortDownBtn" class="btn-sort" title="Sort Down">
                        <span class="arrow-down">▼</span>
                    </button>
                </div>
            </div>
        </div>
    </aside>

    <!-- OVERLAY -->
    <div class="overlay" id="overlay"></div>

    <!-- HLAVNÍ OBSAH -->
    <main class="main-content">
        @RenderBody()
    </main>

    <!-- MODAL pro detail akcie -->
    <div class="modal" id="detailModal">
        <div class="modal-content" id="detailModalContent">
            <span class="modal-close" id="modalCloseBtn">&times;</span>
            <h3 id="modalTitle">Detail akcie</h3>
            <p id="modalBody">Zde se zobrazí detailní info...</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var script = document.createElement('script');
            script.src = '/js/app.js';
            document.body.appendChild(script);
        });
    </script>
    @RenderSection("Scripts", required: false)
</body>

</html>
